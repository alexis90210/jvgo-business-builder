
var data = {}
data.typeUser = document.querySelector("#typeUser")?.innerText
data.typePack = document.querySelector("#typePack")?.innerText
data.Prix = document.querySelector("#Prix")?.innerText
data.TypeAbonnement = document.querySelector("#TypeAbonnement")?.innerText
function selectInfo() {
	const Madame =  document.querySelector("#radioMadame")?.checked 
	const Monsieur =  document.querySelector("#radioMonsieur")?.checked 
	
	data.Civilite = Monsieur ? "Monsieur" : ( Madame ? "Madame" : "" )
	data.Nom = document.querySelector("#Nom")?.value
	data.Prenom = document.querySelector("#Prenom")?.value
	data.Email = document.querySelector("#Email")?.value
	data.NomEntreprise = document.querySelector("#NomEntreprise")?.value
	data.Mobile = document.querySelector("#Mobile")?.value

	if ( !( Madame == true || Monsieur == true ) && data.typeUser == "Indépendant" ) {
		
		document.querySelector("#error-display").classList.remove('d-none')	    		
		document.querySelector('#error-display').innerText = "Veuillez selectionner la civilité"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	} 
	if ( !data.NomEntreprise && data.typeUser != "Indépendant" ) {
		document.querySelector("#error-display").classList.remove('d-none')
		
		document.querySelector('#error-display').innerText = "Veuillez renseigner le champ Nom Entreprise"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	}
	if ( !data.Nom ) {
		document.querySelector("#error-display").classList.remove('d-none')
		
		document.querySelector('#error-display').innerText = "Veuillez renseigner le champ Nom"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	}
	if ( !data.Prenom ) {
		document.querySelector("#error-display").classList.remove('d-none')
		document.querySelector('#error-display').innerText = "Veuillez renseigner le champ Prenom"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	} 
	if ( !data.Email ) {
		document.querySelector("#error-display").classList.remove('d-none')
		
		document.querySelector('#error-display').innerText = "Veuillez renseigner le champ Email"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	} 

	if ( !data.Mobile ) {
		document.querySelector("#error-display").classList.remove('d-none')
		
		document.querySelector('#error-display').innerText = "Veuillez renseigner le champ Mobile"
		document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
		setTimeout( () => {
			document.querySelector("#error-display").classList.add('d-none')
		},4000)
		return
	} 

	// hide form and show loader indicator
	document.querySelector("#form-demande").classList.add('d-none')
	document.querySelector("#informations").classList.add('d-none')
	document.querySelector("#loading-indicator").classList.remove('d-none')
	console.log( data );
	axios.post('/save/deleguer-ma-comptabilite', {
		...data
	})
	.then(function (response) {
		console.log( response.data );
		const api = response.data
		document.querySelector('#loading-indicator').classList.add('d-none')
		
		if (api.code == "success" ) {
			document.querySelector('#success-process').classList.remove('d-none')
		} else {
		
			document.querySelector('#error-display').innerText = api.message
			document.querySelector('#error-display').scrollIntoView({ behavior: 'smooth', block: 'end' })
			setTimeout( () => {
				document.querySelector("#error-display").classList.add('d-none')
			},8000)
		}
	})
	.catch(function (error) {
		console.log(error);
		document.querySelector("#form-demande").classList.remove('d-none')
		document.querySelector("#informations").classList.remove('d-none')
		document.querySelector("#loading-indicator").classList.add('d-none')
	});
}